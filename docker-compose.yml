services:
  evecal:
    build: .                                    # just up local — builds from Dockerfile
    image: ghcr.io/phsk69/evecal-dotnet:latest  # just up tag — pulls from GHCR
    ports:
      - "8080:8080"
    volumes:
      - evecal-data:/app/data
      - evecal-logs:/app/logs
    env_file:
      - .env
    environment:
      - EVE_CLIENT_ID=${EVE_CLIENT_ID}
      - EVE_CALLBACK_URL=${EVE_CALLBACK_URL:-http://localhost:8080/callback}
      - EVE_SCOPES=${EVE_SCOPES:-esi-calendar.read_calendar_events.v1 esi-corporations.read_corporation_membership.v1 esi-characters.read_corporation_roles.v1}
      - CALENDAR_REFRESH_MINUTES=${CALENDAR_REFRESH_MINUTES:-15}
      - MATRIX_WEBHOOK_URL=${MATRIX_WEBHOOK_URL:-}
    restart: unless-stopped

volumes:
  evecal-data:
    name: evecal-data
  evecal-logs:
    name: evecal-logs
